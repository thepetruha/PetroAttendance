<script src="../ejs.js"></script>
<script>
    var dataJSON = {};
    var date1 = document.getElementById('date1');
    var date2 = document.getElementById('date2');
    var groupSelect = document.getElementById('GropSelect');
    var popup = document.querySelector('#pop1');
    var popup2 = document.querySelector('#pop2');


    var documentName1 = date1.value;
    var documentName2 = date2.value;
    var thisDate;
    
    function closeopen(){
       popup.classList.toggle('show');
    }
    function closeopen2(){
       popup2.classList.toggle('show');
    }
    
    date1.addEventListener('change', function(e){
        documentName1 = this.value;
    });

    date2.addEventListener('change', function(e){
        documentName2 = this.value;
    });
    
    var documentSelect = groupSelect.value;
    groupSelect.addEventListener('change', function(){
        documentSelect = this.value;
    })

    
    async function generate() {
        dataJSON = {
            dateWriteFirst: documentName1,
            dateWriteSecond: documentName2,
            groupSelect: documentSelect, 
            nameGroup: groupSelect.options[groupSelect.selectedIndex].text
        };    
        var tableRowArr = [];
        var jsDate = JSON.stringify(dataJSON);
        console.log(jsDate)
        const result = await fetch('http://' + document.location.host + '/export', {
            method: 'POST', 
            headers: {
                'Content-Type': 'application/json'
            }, 
            body: jsDate
        })
        const datas = await result.json();
        (datas.result == -1) ? closeopen2() : closeopen()
        console.log(datas)
        let text = JSON.stringify(datas);

        // closeopen();
    }
</script>
